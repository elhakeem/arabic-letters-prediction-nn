<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>chars</title>
    <style>
      td {
        width: 28px;
        height: 28px;
        text-align: center;
      }
    </style>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
  </head>
  <body>
    <table>
      <tr>
        <td>ء</td>
        <td>0</td>
      </tr>
      <tr>
        <td>آ</td>
        <td>1</td>
      </tr>
      <tr>
        <td>ـآ</td>
        <td>2</td>
      </tr>
      <tr>
        <td>أ</td>
        <td>3</td>
      </tr>
      <tr>
        <td>ـأ</td>
        <td>4</td>
      </tr>
      <tr>
        <td>ؤ</td>
        <td>5</td>
      </tr>
      <tr>
        <td>ـؤ</td>
        <td>6</td>
      </tr>
      <tr>
        <td>إ</td>
        <td>7</td>
      </tr>
      <tr>
        <td>ـإ</td>
        <td>8</td>
      </tr>
      <tr>
        <td>ئ</td>
        <td>9</td>
      </tr>
      <tr>
        <td>ئـ</td>
        <td>10</td>
      </tr>
      <tr>
        <td>ـئ</td>
        <td>11</td>
      </tr>
      <tr>
        <td>ـئـ</td>
        <td>12</td>
      </tr>
      <tr>
        <td>ا</td>
        <td>13</td>
      </tr>
      <tr>
        <td>ـا</td>
        <td>14</td>
      </tr>
      <tr>
        <td>ب</td>
        <td>15</td>
      </tr>
      <tr>
        <td>بـ</td>
        <td>16</td>
      </tr>
      <tr>
        <td>ـب</td>
        <td>17</td>
      </tr>
      <tr>
        <td>ـبـ</td>
        <td>18</td>
      </tr>
      <tr>
        <td>ة</td>
        <td>19</td>
      </tr>
      <tr>
        <td>ـة</td>
        <td>20</td>
      </tr>
      <tr>
        <td>ت</td>
        <td>21</td>
      </tr>
      <tr>
        <td>تـ</td>
        <td>22</td>
      </tr>
      <tr>
        <td>ـت</td>
        <td>23</td>
      </tr>
      <tr>
        <td>ـتـ</td>
        <td>24</td>
      </tr>
      <tr>
        <td>ث</td>
        <td>25</td>
      </tr>
      <tr>
        <td>ثـ</td>
        <td>26</td>
      </tr>
      <tr>
        <td>ـث</td>
        <td>27</td>
      </tr>
      <tr>
        <td>ـثـ</td>
        <td>28</td>
      </tr>
      <tr>
        <td>ج</td>
        <td>29</td>
      </tr>
      <tr>
        <td>جـ</td>
        <td>30</td>
      </tr>
      <tr>
        <td>ـج</td>
        <td>31</td>
      </tr>
      <tr>
        <td>ـجـ</td>
        <td>32</td>
      </tr>
      <tr>
        <td>ح</td>
        <td>33</td>
      </tr>
      <tr>
        <td>حـ</td>
        <td>34</td>
      </tr>
      <tr>
        <td>ـح</td>
        <td>35</td>
      </tr>
      <tr>
        <td>ـحـ</td>
        <td>36</td>
      </tr>
      <tr>
        <td>خ</td>
        <td>37</td>
      </tr>
      <tr>
        <td>خـ</td>
        <td>38</td>
      </tr>
      <tr>
        <td>ـخ</td>
        <td>39</td>
      </tr>
      <tr>
        <td>ـخـ</td>
        <td>40</td>
      </tr>
      <tr>
        <td>د</td>
        <td>41</td>
      </tr>
      <tr>
        <td>ـد</td>
        <td>42</td>
      </tr>
      <tr>
        <td>ذ</td>
        <td>43</td>
      </tr>
      <tr>
        <td>ـذ</td>
        <td>44</td>
      </tr>
      <tr>
        <td>ر</td>
        <td>45</td>
      </tr>
      <tr>
        <td>ـر</td>
        <td>46</td>
      </tr>
      <tr>
        <td>ز</td>
        <td>47</td>
      </tr>
      <tr>
        <td>ـز</td>
        <td>48</td>
      </tr>
      <tr>
        <td>س</td>
        <td>49</td>
      </tr>
      <tr>
        <td>سـ</td>
        <td>50</td>
      </tr>
      <tr>
        <td>ـس</td>
        <td>51</td>
      </tr>
      <tr>
        <td>ـسـ</td>
        <td>52</td>
      </tr>
      <tr>
        <td>ش</td>
        <td>53</td>
      </tr>
      <tr>
        <td>شـ</td>
        <td>54</td>
      </tr>
      <tr>
        <td>ـش</td>
        <td>55</td>
      </tr>
      <tr>
        <td>ـشـ</td>
        <td>56</td>
      </tr>
      <tr>
        <td>ص</td>
        <td>57</td>
      </tr>
      <tr>
        <td>صـ</td>
        <td>58</td>
      </tr>
      <tr>
        <td>ـص</td>
        <td>59</td>
      </tr>
      <tr>
        <td>ـصـ</td>
        <td>60</td>
      </tr>
      <tr>
        <td>ض</td>
        <td>61</td>
      </tr>
      <tr>
        <td>ضـ</td>
        <td>62</td>
      </tr>
      <tr>
        <td>ـض</td>
        <td>63</td>
      </tr>
      <tr>
        <td>ـضـ</td>
        <td>64</td>
      </tr>
      <tr>
        <td>ط</td>
        <td>65</td>
      </tr>
      <tr>
        <td>طـ</td>
        <td>66</td>
      </tr>
      <tr>
        <td>ـط</td>
        <td>67</td>
      </tr>
      <tr>
        <td>ـطـ</td>
        <td>68</td>
      </tr>
      <tr>
        <td>ظ</td>
        <td>69</td>
      </tr>
      <tr>
        <td>ظـ</td>
        <td>70</td>
      </tr>
      <tr>
        <td>ـظ</td>
        <td>71</td>
      </tr>
      <tr>
        <td>ـظـ</td>
        <td>72</td>
      </tr>
      <tr>
        <td>ع</td>
        <td>73</td>
      </tr>
      <tr>
        <td>عـ</td>
        <td>74</td>
      </tr>
      <tr>
        <td>ـع</td>
        <td>75</td>
      </tr>
      <tr>
        <td>ـعـ</td>
        <td>76</td>
      </tr>
      <tr>
        <td>غ</td>
        <td>77</td>
      </tr>
      <tr>
        <td>غـ</td>
        <td>78</td>
      </tr>
      <tr>
        <td>ـغ</td>
        <td>79</td>
      </tr>
      <tr>
        <td>ـغـ</td>
        <td>80</td>
      </tr>
      <tr>
        <td>ف</td>
        <td>81</td>
      </tr>
      <tr>
        <td>فـ</td>
        <td>82</td>
      </tr>
      <tr>
        <td>ـف</td>
        <td>83</td>
      </tr>
      <tr>
        <td>ـفـ</td>
        <td>84</td>
      </tr>
      <tr>
        <td>ق</td>
        <td>85</td>
      </tr>
      <tr>
        <td>قـ</td>
        <td>86</td>
      </tr>
      <tr>
        <td>ـق</td>
        <td>87</td>
      </tr>
      <tr>
        <td>ـقـ</td>
        <td>88</td>
      </tr>
      <tr>
        <td>ك</td>
        <td>89</td>
      </tr>
      <tr>
        <td>كـ</td>
        <td>90</td>
      </tr>
      <tr>
        <td>ـك</td>
        <td>91</td>
      </tr>
      <tr>
        <td>ـكـ</td>
        <td>92</td>
      </tr>
      <tr>
        <td>ل</td>
        <td>93</td>
      </tr>
      <tr>
        <td>لـ</td>
        <td>94</td>
      </tr>
      <tr>
        <td>ـل</td>
        <td>95</td>
      </tr>
      <tr>
        <td>ـلـ</td>
        <td>96</td>
      </tr>
      <tr>
        <td>م</td>
        <td>97</td>
      </tr>
      <tr>
        <td>مـ</td>
        <td>98</td>
      </tr>
      <tr>
        <td>ـم</td>
        <td>99</td>
      </tr>
      <tr>
        <td>ـمـ</td>
        <td>100</td>
      </tr>
      <tr>
        <td>ن</td>
        <td>101</td>
      </tr>
      <tr>
        <td>نـ</td>
        <td>102</td>
      </tr>
      <tr>
        <td>ـن</td>
        <td>103</td>
      </tr>
      <tr>
        <td>ـنـ</td>
        <td>104</td>
      </tr>
      <tr>
        <td>ه</td>
        <td>105</td>
      </tr>
      <tr>
        <td>هـ</td>
        <td>106</td>
      </tr>
      <tr>
        <td>ـه</td>
        <td>107</td>
      </tr>
      <tr>
        <td>ـهـ</td>
        <td>108</td>
      </tr>
      <tr>
        <td>و</td>
        <td>109</td>
      </tr>
      <tr>
        <td>ـو</td>
        <td>110</td>
      </tr>
      <tr>
        <td>لا</td>
        <td>111</td>
      </tr>
      <tr>
        <td>ـلا</td>
        <td>112</td>
      </tr>
      <tr>
        <td>لأ</td>
        <td>113</td>
      </tr>
      <tr>
        <td>ـلأ</td>
        <td>114</td>
      </tr>
      <tr>
        <td>لإ</td>
        <td>115</td>
      </tr>
      <tr>
        <td>ـلإ</td>
        <td>116</td>
      </tr>
      <tr>
        <td>لآ</td>
        <td>117</td>
      </tr>
      <tr>
        <td>ـلآ</td>
        <td>118</td>
      </tr>
      <tr>
        <td>ى</td>
        <td>119</td>
      </tr>
      <tr>
        <td>ـى</td>
        <td>120</td>
      </tr>
      <tr>
        <td>ي</td>
        <td>121</td>
      </tr>
      <tr>
        <td>يـ</td>
        <td>122</td>
      </tr>
      <tr>
        <td>ـي</td>
        <td>123</td>
      </tr>
      <tr>
        <td>ـيـ</td>
        <td>124</td>
      </tr>
    </table>
    <div id="text"></div>
    <script>
      // const fonts = ['Arial', 'tahoma', 'cairo', 'courier', 'tajawal', 'system-ui'];
      const fonts = ['monospace'];
      // const weights = [100, 200, 300, 400, 500, 600, 700, 800, 900]
      const weights = [100, 600]
      const rows = document.querySelectorAll("tr");
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      const d = 28;
      canvas.width = 2380;
      canvas.height = 2380;
      const a = document.createElement("a");
      document.body.appendChild(a)
      document.body.appendChild(canvas)
      // document.body.appendChild(canvas)

      const generateSvgImage = (char, font, weight) => {
        let data = `<svg xmlns="http://www.w3.org/2000/svg" height="${d}" width="${d}">
          <text
            x="50%"
            y="50%"
            dominant-baseline="middle"
            text-anchor="middle"
            font-family="${font}"
            font-weight="${weight}"
            font-size="20"
            >${char}</text>
          </svg>`;
        return new Blob([data], { type: "image/svg+xml" })
      }

      const download = (name) => {
        a.href = canvas.toDataURL()
        a.download = name + ".png";
        a.click();
      }

      const getPosition = (r, c) => {
        return {
          x: c * d + 1,
          y: r * d + 1
        }
      }
      const draw = (text, font, weight, label, hash, x, y) => {
        return new Promise((res, rej) => {
          const urlFromSvgData = window
          .URL
          .createObjectURL(generateSvgImage(text, font, weight));
  
          let image = new Image();
          image = new Image();
          image.onload = function () {
            ctx.fillStyle = "#ffffff";
            const {x, y} = getPosition(r, c)
            ctx.fillRect(x, y, x+d, y+d);
            ctx.drawImage(image, x, y)
            // download(label+ "-" +hash)
            res()
          }
          image.src = urlFromSvgData;
        })
      }
      const prom = [];

      fonts.forEach((font, x) => {
        weights.forEach((weight, y) => {
          rows.forEach(async (row, i) => {
            const char = row.querySelector("td").innerText;
            prom.push([char, font, weight, i, ("" + x + "-" + y)])
          })
        })
      })
      let r = 0;
      let c = 0;
      let f = 0;
      const intrvl = setInterval(async () => {
        if (prom[f]) {
          await draw(...prom[f])
          c++
          f++
          if (c == 83) {
            r++
            c = 0;
            console.log(prom[f])
          }
        }
        else {
          clearInterval(intrvl)
          // download("letters")
        }
      }, 100)
    </script>
  </body>
</html>
